"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[16117],{178467:(e,t,a)=>{a.d(t,{Z:()=>N,G:()=>v});var n=a(441143),r=a.n(n),l=a(244311);let o={vDASHHEVCSLCONTROL:"V_DASH_HEVC_SL_CONTROL",vHLSHEVC2SEC:"V_HLS_HEVC_2_SEC",vHLSHEVCSLCONTROL:"V_HLS_HEVC_SL_CONTROL",vHLSSINGLEFILECMAFEXP:"V_HLS_SINGLE_FILE_CMAF_EXP",vHLSSINGLEFILECONTROL:"V_HLS_SINGLE_FILE_CONTROL",vHLSSINGLEFILETSEXP:"V_HLS_SINGLE_FILE_TS_EXP",vHLSSLCONTROL:"V_HLS_SL_CONTROL",vHLSV3:"V_HLSV3",vHLSV3EXP:"V_HLSV3_EXP",vHLSV3MOBILE:"V_HLSV3_MOBILE",vHLSV3WEB:"V_HLSV3_WEB",vHLSV4:"V_HLSV4",vLOWBITRATEEXPHLSHEVCCONTROL:"V_LOW_BITRATE_EXP_HLS_HEVC_CONTROL",vLOWBITRATEEXPHLSHEVCLOB:"V_LOW_BITRATE_EXP_HLS_HEVC_LOB",vLOWBITRATEEXPHLSHEVCLQS:"V_LOW_BITRATE_EXP_HLS_HEVC_LQS"},i=/(\d\d0P)(\d\d0K)/,c=/QVBR(8|10)/,u=/(EXP\d?|ADSHQ|AVC|DASH|MANI|HIGHQUAL|HEVC|HLS|H265|H264|720P?|MP4|ENABLED|CONTROL|PROD|T\d|Q?VBR\d*|AUTOABR|MEDIACONVERT|QUALITY|REARRANGED|REMHIGHRES|VISIONULAR|480$|640$|V2$|\dSEC$|\d\d0P\d\d0K$)/g,s=/^v/,d=e=>o[e]??e.replace(u,"_$1").replace(i,"$1_$2").replace(c,"QVBR_$1").replace("ADSHQ","ADS_HQ").replace("HIGHQUAL","HIGH_QUAL").replace("REMHIGHRES","REM_HIGH_RES").replace(s,"V"),p=/[A-Z]/g,y=e=>e.replace(p,e=>`_${e.toLowerCase()}`),g=/^_/,f=e=>e.replace(g,""),m=e=>f(y(e)),L=["actionOptions","feedbackText","selectedItem","savedInfo","undoCallbackProps"],S=["boardId","localPinId","showFeedback","showFeedbackOverlay","sectionId","subTitle","viewType","viewParameter"],_=(e,t)=>{if(S.includes(e))return e;switch(e){case"entityId":return"id";case"__id":return r()(t.node_id,"node_id is missing. Please only select the __id field on objects which have an id field."),"node_id";default:return m(e)}},h=e=>"StoryPinPage"===e||"StoryPinImageBlock"===e,k=(e,t,a)=>{if(h(a)){if("images"===e)return"image";if("imagesAdjusted"===e)return"image_adjusted"}if("PinTagChipImagesPerSpec"===a&&"image"===e)return"images";if("VideoDetail"===t)return d(e);if(L.includes(e))return e;switch(e){case"reactionCountsData":return"reaction_counts";case"videoData":return"video";default:return m(e)}},I=(e,t)=>{switch(e){case"reactionType":return"string"==typeof t?Number(t):t;case"campaignId":case"pinPromotionId":return"number"==typeof t?String(t):t;default:return t}},E=(e,t,a)=>"Video"===t&&"duration"===e?a?.duration!=null?a.duration:Object.values(a?.video_list||{}).find(e=>e?.duration!=null)?.duration:"__typename"===e?t:I(e,a?.[_(e,a)]),C=({untypedInput:e,concreteType:t})=>{if(!e)return null;switch(r()("object"==typeof e,"legacy data must be an object"),t){case"ReactionCountModel":return Object.entries(e).map(([e,t])=>({reaction_type:e,reaction_count:t}));case"PinThroughProperties":case"ThroughProperties":return Object.entries(e).map(([e,t])=>({key:e,data:t}));default:if(Array.isArray(e))return e;return Object.entries(e).map(([e,t])=>({key:e,value:t}))}},P=({args:e,name:t})=>{let a=e.find(e=>e.name===t);return a&&"string"==typeof a.value?a.value:null},A=(e,t,a)=>{let{args:n,name:l}=a;if("PinTagChipImagesPerSpec"===t&&"image"===l)return e?.images?.["750x"];let o=e?.[k(l,a.concreteType,t)];if(!o)return o;let i=P({args:n??[],name:"spec"});if(i){if(r()("object"==typeof o,"value must be an object"),h(t)){let{dominant_color:e,images:t}=o;if(!t)return t;r()("object"==typeof t,"images must be an object");let a=t["orig"===i?"originals":i];return a&&e?{...a,dominant_color:e}:a}return o[i]}return o},H={HeadingBlock:"StoryPinHeadingBlock",IngredientBlock:"StoryPinIngredientBlock",InstantContentURLNavigateAction:"InstantContentActionUrlNavigate",InstantContentHeaderBlock:"InstantContentHeader",InstantContentParagraphBlock:"InstantContentParagraph",InstantContentTextBlock:"InstantContentText",InstantContentHeadingBlock:"InstantContentHeading",InstantContentImageBlock:"InstantContentImage",InstantContentVideoBlock:"InstantContentVideo",InstantContentTableBlock:"InstantContentTable",InstantContentGroupBlock:"InstantContentGroup",InstantContentOrderedListBlock:"InstantContentOrderedList",InstantContentUnorderedListBlock:"InstantContentUnorderedList",InstantContentSectionBlock:"InstantContentSection",InstantContentSeparatorBlock:"InstantContentSeparator",InstantContentUserBlock:"InstantContentUser",InstantContentWebBlock:"InstantContentWeb",InstantContentPromotedWebBlock:"InstantContentPromotedWeb",LinkBlock:"StoryPinLinkBlock",ParagraphBlock:"StoryPinParagraphBlock",SupplyBlock:"StoryPinSupplyBlock",TextBlock:"StoryPinTextBlock"},B=(e,t)=>(H[e]??e).toLowerCase()===t,b={0:"StoryPinParagraphBlock",1:"StoryPinHeadingBlock",2:"StoryPinImageBlock",3:"StoryPinVideoBlock",4:"StoryPinLinkBlock",5:"StoryPinIngredientBlock",6:"StoryPinSupplyBlock",7:"StoryPinListBlock",8:"StoryPinKeyValueBlock",9:"StoryPinTextBlock",11:"StoryPinMusicBlock",12:"StoryPinMentionStickerBlock",13:"StoryPinProductStickerBlock",14:"StoryPinStaticStickerBlock",15:"StoryPinAnimatedStickerBlock",16:"StoryPinCommentReplyBlock",17:"StoryPinVirtualTryOnMakeupStickerBlock",18:"StoryPinAdBlock",19:"StoryPinGenericInteractiveStickerBlock"},O=/_/g,R=e=>"string"==typeof e.type?e.type.replace(O,"").toLowerCase():"number"==typeof e.block_type?b[e.block_type].toLowerCase():void 0;var T=a(398895),V=a(67347);let v=Symbol("inlineFragmentSpread"),w=({conditionContext:e,fragmentName:t,mutableOutput:a,parentType:n,selections:l,legacyDataSymbolValue:o})=>{let i=o.data,{refetchInfo:c}=o;l.forEach(l=>{switch(l.kind){case"ScalarField":{let{alias:e,name:t}=l;a[e??t]=E(t,n,i);break}case"LinkedField":{let{alias:o,name:u,concreteType:s,plural:d,selections:p}=l,y=o??u,g=A(i,n,l);if(null==g){a[y]=g;return}if(d){let n=C({untypedInput:g,concreteType:s}),l=a[y];r()(!l||Array.isArray(l),"plural data must be an array"),a[y]=n?.filter(Boolean).map((a,n)=>{let r=l?.[n]??{};return w({conditionContext:e,fragmentName:t,mutableOutput:r,parentType:s,selections:p,legacyDataSymbolValue:{data:a,refetchInfo:c}}),r})}else{r()("object"==typeof g,`Value for ${u} must be an object${s?` with type ${s}`:""}, but a ${typeof g} is given`);let n=a[y]??{};a[y]=n,w({conditionContext:e,fragmentName:t,mutableOutput:n,parentType:s,selections:p,legacyDataSymbolValue:{data:g,refetchInfo:c}})}break}case"InlineFragment":{let{abstractKey:n,type:c,selections:u}=l;if(r()(null!=c&&null===n,"We only support using inline fragment to refine to concrete types for now. Contact @jackhsu or @robertbalicki"),null==i)break;let s=R(i);null!=s&&B(c,s)&&w({conditionContext:e,fragmentName:t,mutableOutput:a,parentType:c,selections:u,legacyDataSymbolValue:o});break}case"Condition":{let{condition:r,selections:i}=l,c=!0;"isAuth"===r?c=e.isAuth===l.passingValue:"isDesktop"===r&&(c=e.isDesktop===l.passingValue),c&&w({conditionContext:e,fragmentName:t,mutableOutput:a,parentType:n,selections:i,legacyDataSymbolValue:o});break}case"FragmentSpread":(0,T.I9)(a,{data:i,refetchInfo:c});break;case"ClientExtension":w({conditionContext:e,fragmentName:t,mutableOutput:a,parentType:n,selections:l.selections,legacyDataSymbolValue:o});break;case"InlineDataFragmentSpread":{let t={},{selections:r,name:i}=l;w({conditionContext:e,fragmentName:i,mutableOutput:t,parentType:n,selections:r,legacyDataSymbolValue:o}),a[v]||(a[v]={}),a[v][i]=t;break}case"Defer":case"Stream":case"ActorChange":case"FlightField":case"ModuleImport":case"RelayResolver":case"RequiredField":case"RelayLiveResolver":case"AliasedFragmentSpread":case"ClientEdgeToClientObject":case"ClientEdgeToServerObject":case"AliasedInlineFragmentSpread":throw Error(`The selection type '${l.kind}' is not supported yet. Contact @jackhsu or @robertbalicki`);default:throw Error(`Unexpected selection type '${l.kind}'`)}})},D=new Set;function N({conditionContext:e,fragment:t,legacyData:a}){let n;let o=(0,l.getFragment)(t);try{n=function({conditionContext:e,fragment:t,legacyData:a}){let n=null==t.abstractKey;if(n){let e=null!=a?R(a):null;null!=e&&r()(B(t.type,e),`fragment data type '${t.type}' does not match legacy data type '${e}'. See http://pinch.pinadmin.com/fragment-data-type-does-not-match-legacy-data-type.`)}let l={};return w({conditionContext:e,fragmentName:t.name,mutableOutput:l,parentType:t.type,selections:t.selections,legacyDataSymbolValue:a}),l}({conditionContext:e,fragment:o,legacyData:a})}catch(t){throw D.has(o.name)||(D.add(o.name),(0,V.nP)("autoLegacyAdapter.erroredReadResults",{sampleRate:1,tags:{fragmentName:o.name,rootId:a.data.id,rootType:a.data.type,url:window.location.href,isAuth:e.isAuth}})),t}return n}},669744:(e,t,a)=>{a.d(t,{g:()=>l,j:()=>o});var n=a(398895),r=a(67347);function l(e){if(Array.isArray(e)){let t=e[0];if(null==t)return{kind:"PluralLegacy",data:[]};if(null!=t.__fragments)return{kind:"GraphQL",data:e};let a=(0,n.G5)(t);return null!=a?{kind:"PluralLegacy",data:e.map(e=>(0,n.Be)(e))}:((0,r.nP)("autoLegacyAdapter.invalidPluralDataKey",{sampleRate:1}),{kind:"PluralLegacy",data:e.map(e=>(0,n.Be)(e))})}let t=(0,n.G5)(e);if(null!=t)return{kind:"SingularLegacy",data:t};if(e.__fragments)return{kind:"GraphQL",data:e};if("graphqlRef"===e.type)return{kind:"GraphQL",data:e.data};if("deprecated"===e.type){let{data:t}=e;return Array.isArray(t)?{kind:"PluralLegacy",data:t.map(e=>({data:e,refetchInfo:null}))}:{kind:"SingularLegacy",data:{data:e.data,refetchInfo:null}}}throw Error("Invalid value")}function o(e){let t=(0,n.G5)(e);return null!=t?{type:"deprecated",data:t.data}:e.__fragments?{type:"graphqlRef",data:e}:e}},398895:(e,t,a)=>{a.d(t,{Be:()=>l,G5:()=>r,I9:()=>o});let n=Symbol("legacyData");function r(e){return e[n]}function l(e){return e[n]}function o(e,t){return e[n]=t,e}},681669:(e,t,a)=>{a.d(t,{qH:()=>A,Zm:()=>L,HF:()=>C,sr:()=>P,O7:()=>S,V4:()=>E});var n=a(702664),r=a(167912),l=a(178467);function o(e){return null==e?"null or undefined":Array.isArray(e)?"Array":typeof e}function i(e,t,a){return"Manual"===t?{path:e,message:`Value found only in legacy adapter, where it had type ${o(a)}. (Or it was null in the auto-legacy adapter.)`,kind:"MissingInLegacy"}:{path:e,message:`Value found only in auto-legacy adapter, where it had type ${o(a)}. (Or it was null in the legacy adapter.)`,kind:"MissingInAutoLegacy"}}function c(e,t,a){let n=o(t),r=o(a);return{path:e,message:`Found item of type ${n} in the legacy adapter result, and an item of type ${r} in the auto-legacy result.`,kind:"Type"}}var u=a(398895),s=a(773285),d=a(780280),p=a(50286),y=a(350118),g=a(67347);let f={},m=new Set;function L(e,t,{useGraphQLAdapter:a,useLegacyAdapter:n}){if("deprecated"===t.type)return{data:n(t.data),childDataKey__DEPRECATED:t};let l=(0,r.useFragment)(e,t.data);return{data:a(l),childDataKey__DEPRECATED:{type:"graphqlRef",data:l}}}let S=()=>{let{isAuthenticated:e}=(0,d.B)(),t=(0,p.HG)();return{isAuth:!!e,isDesktop:t}};function _(){return"undefined"!=typeof performance?performance.now():Date.now()}function h(e){let t=_(),a=e(),n=_();return[a,n-t]}let k=new Map;function I(e,t,a,n){let r=k.get(n);if(r){if(!r.has(t)){let[n,l]=h(e);return r.add(t),(0,g.LY)(t,l,{sampleRate:a.isParallel?1:.1,tags:a}),n}}else{let[r,l]=h(e);return k.set(n,new Set([t])),(0,g.LY)(t,l,{sampleRate:a.isParallel?1:.1,tags:a}),r}return e()}function E(e,t){let{checkExperiment:a}=(0,s.F)(),{isAuthenticated:n}=(0,d.B)(),{group:r,anyEnabled:p}=a(n?"web_graphql_auto_legacy_adapters_auth":"web_graphql_auto_legacy_adapters_unauth"),y=S();return r.includes("parallel")?a=>{let n=I(()=>(0,u.I9)(t(a),{data:a,refetchInfo:null}),"autoLegacyAdapter.legacyTiming",{isParallel:!0,fragmentName:e.name},e.name);return"object"==typeof window&&function(e,t,a,n){let r;try{r=I(()=>(0,l.Z)({conditionContext:t,fragment:e,legacyData:{data:a,refetchInfo:null}}),"autoLegacyAdapter.autoLegacyTiming",{fragmentName:e.name,isParallel:!0},e.name)}catch{return}try{var u;let t=(u=r,function e(t,a,n){let r=[],l=Object.keys(a),u=Object.keys(n);for(let u of l){let l=a[u],s=n[u];r.push(...function t(a,n,r){return null!=n&&null==r?[i(a,"Manual",n)]:n===r||null==n&&null==r?[]:Array.isArray(n)?Array.isArray(r)?function(e,a,n){if(a.length!==n.length)return[{path:e,message:`legacyResult is an array of length ${a.length}; autoLegacyResult is an array of length ${n.length}`,kind:"Length"}];let r=[];for(let l=0;l<a.length;l+=1){let o=a[l],i=n[l];r.push(...t(`${e}[]`,o,i))}return r}(a,n,r):[c(a,n,r)]:"object"==typeof n?"object"==typeof r&&null!==r&&null!==n?e(a,n,r):[c(a,n,r)]:[typeof n!=typeof r?c(a,n,r):{path:a,message:`Found items of type ${o(n)}, but their values did not match.`,kind:"Value"}]}(`${t}.${u}`,l,s))}for(let e of u){let l=a[e],o=n[e];null!=o&&null==l&&r.push(i(`${t}.${e}`,"Auto",o))}return r}("",n,u));if(t.length>0){window.SHOULD_LOG_ADAPTER_DIFFERENCES&&console.warn({differences:t,fragment:e.name}),f[e.name]=f[e.name]??new Set;let a=f[e.name];for(let n of t)a.has(n.path)||(a.add(n.path),(0,g.nP)("autoLegacyAdapter.inconsistentReadResults",{sampleRate:1,tags:{fragmentName:e.name,path:n.path,kind:n.kind}}))}}catch(t){m.has(e.name)||(m.add(e.name),window.SHOULD_LOG_ADAPTER_DIFFERENCES&&console.warn(`comparing results threw for fragment ${e.name}`),(0,g.nP)("autoLegacyAdapter.erroredCompareResults",{sampleRate:1,tags:{fragmentName:e.name}}))}}(e,y,a,n),n}:p?t=>I(()=>(0,l.Z)({conditionContext:y,fragment:e,legacyData:{data:t,refetchInfo:null}}),"autoLegacyAdapter.autoLegacyTiming",{fragmentName:e.name,isParallel:!1},e.name):a=>I(()=>(0,u.I9)(t(a),{data:a,refetchInfo:null}),"autoLegacyAdapter.legacyTiming",{fragmentName:e.name,isParallel:!1},e.name)}function C(e,t,a){let r;switch(a.type){case"article":r=e=>{let t=(0,n.useSelector)(({articles:t})=>t[e]);return t?a.useLegacyAdapter(t):null};break;case"story":r=e=>{let t=(0,n.useSelector)(({stories:t})=>t[e]);return t?a.useLegacyAdapter(t):null};break;default:r=e=>{let t=(0,y.S6)()(e);return t?a.useLegacyAdapter(t):null}}return L(e,t,{useGraphQLAdapter:a.useGraphQLAdapter,useLegacyAdapter:r})}function P(e,t,a){let n=E(e,a.useLegacyAdapter);return C(e,t,{...a,useGraphQLAdapter:e=>e,useLegacyAdapter:n})}let A=void 0},916117:(e,t,a)=>{a.d(t,{Z:()=>i});var n=a(422578),r=a(178467),l=a(669744),o=a(681669);let i=function(e,t){let a=(0,o.O7)();if(null==t)return null;let i=(0,l.g)(t);switch(i.kind){case"SingularLegacy":{let{data:t}=i;return(0,r.Z)({conditionContext:a,fragment:e,legacyData:t})}case"PluralLegacy":{let{data:t}=i;return t.map(t=>(0,r.Z)({conditionContext:a,fragment:e,legacyData:t}))}case"GraphQL":return(0,n.useFragment)(e,i.data);default:throw Error("Unexpected case")}}}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/16117-e8805bcfe3902b44.mjs.map